{"version":3,"sources":["Form.js","Persons.js","services/contacts.js","Error.js","App.js","index.js"],"names":["Form","props","handleSubmit","newName","handleName","filterName","newNumber","handleNumber","onSubmit","id","value","onChange","onKeyUp","type","className","Persons","persons","filteredPersons","handleDelete","length","map","person","name","number","detector_id","onClick","filteredPerson","baseUrl","contacts","getAll","axios","get","create","newObject","post","deleteContact","delete","update","updatedNumber","put","Error","message","style","App","useState","setPersons","setFilteredPersons","setNewName","setNewNumber","errorMessage","setErrorMessage","alertStyle","setAlertStyle","useEffect","contactService","then","response","data","event","preventDefault","personsNames","index","indexOf","includes","currentPerson","changedPerson","window","confirm","setTimeout","catch","error","newContact","concat","target","regex","RegExp","filter","test","getAttribute","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+KAEO,SAASA,EAAKC,GAAQ,IAEzBC,EAMED,EANFC,aACAC,EAKEF,EALFE,QACAC,EAIEH,EAJFG,WACAC,EAGEJ,EAHFI,WACAC,EAEEL,EAFFK,UACAC,EACEN,EADFM,aAEF,OACE,uBAAMC,SAAUN,EAAhB,UAEE,wCAEE,uBACEO,GAAG,YACHC,MAAOP,EACPQ,SAAUP,EACVQ,QAASP,OAGb,0CAEE,uBACEI,GAAG,cACHI,KAAK,MACLH,MAAOJ,EACPK,SAAUJ,OAGd,uBACA,8BACE,wBAAQO,UAAU,kBAAkBD,KAAK,SAAzC,SACE,mDCjCH,IAAME,EAAU,SAAAd,GAAU,IACvBe,EAAoDf,EAApDe,QAASC,EAA2ChB,EAA3CgB,gBAAiBd,EAA0BF,EAA1BE,QAASe,EAAiBjB,EAAjBiB,aAC3C,OAAuB,IAAnBf,EAAQgB,OACHH,EAAQI,KAAI,SAAAC,GACjB,OACE,gCACE,+BACGA,EAAOC,KADV,UACuBD,EAAOE,UAE9B,wBACEC,YAAaH,EAAOZ,GACpBgB,QAASP,EACTJ,UAAU,iBAHZ,sBAJQO,EAAOC,SAedL,EAAgBG,KAAI,SAAAM,GACzB,OACE,8BACE,+BACGA,EAAeJ,KADlB,UAC+BI,EAAeH,OAC5C,wBACEC,YAAaE,EAAejB,GAC5BgB,QAASP,EACTJ,UAAU,iBAHZ,wBAHMY,EAAeJ,U,gBCvB3BK,EAAU,0DAyBDC,EAPE,CAChBC,OAjBc,WACd,OAAOC,IAAMC,IAAIJ,IAiBjBK,OAdc,SAAAC,GACd,OAAOH,IAAMI,KAAKP,EAASM,IAc3BE,cAXqB,SAAA1B,GACrB,OAAOqB,IAAMM,OAAN,UAAgBT,EAAhB,YAA2BlB,KAWlC4B,OARc,SAAC5B,EAAI6B,GACnB,OAAOR,IAAMS,IAAN,UAAaZ,EAAb,YAAwBlB,GAAM6B,KCJvBE,EAZD,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,MACxB,OAAgB,OAAZD,EACK,KAIP,qBAAKhC,GAAG,QAAQK,UAAW4B,EAA3B,SACGD,KC0IQE,EA1IH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACT5B,EADS,KACA6B,EADA,OAE8BD,mBAAS,IAFvC,mBAET3B,EAFS,KAEQ6B,EAFR,OAGcF,mBAAS,IAHvB,mBAGTzC,EAHS,KAGA4C,EAHA,OAIkBH,mBAAS,IAJ3B,mBAITtC,EAJS,KAIE0C,EAJF,OAKwBJ,mBAAS,MALjC,mBAKTK,EALS,KAKKC,EALL,OAMoBN,mBAAS,WAN7B,mBAMTO,EANS,KAMGC,EANH,KAQhBC,qBAAU,WACRC,EAAezB,SAAS0B,MAAK,SAAAC,GAC3BX,EAAWW,EAASC,WAErB,IAqGH,OACE,gCACE,2CACA,cAAC,EAAD,CAAOhB,QAASQ,EAAcP,MAAOS,IACrC,cAACnD,EAAD,CACEE,aAxGe,SAAAwD,GACnBA,EAAMC,iBACN,IAAIC,EAAe5C,EAAQI,KAAI,SAAAC,GAAM,OAAIA,EAAOC,QAC5CuC,EAAQD,EAAaE,QAAQ3D,GACjC,GAAIyD,EAAaG,SAAS5D,GAAU,CAClC,IAAI6D,EAAgBhD,EAAQ6C,GAC5B,GAAIG,EAAczC,SAAWjB,EAAW,CACtC,IAAI2D,EAAa,2BAAQD,GAAR,IAAuBzC,OAAQjB,IAC5CG,EAAKwD,EAAcxD,GACVyD,OAAOC,QAAP,8CAC4BhE,EAD5B,OAIXmD,EACGjB,OAAO5B,EAAIwD,GACXV,MAAK,SAAAC,GACJX,EACE7B,EAAQI,KAAI,SAAAC,GAAM,OAChBA,EAAOZ,KAAOA,EAAKY,EAASmC,EAASC,SAGzCL,EAAc,WACdF,EAAgB,qBAAD,OAAsB/C,IACrCiE,YAAW,WACTlB,EAAgB,QACf,QAEJmB,OAAM,SAAAC,GACLlB,EAAc,SACdF,EAAgB,wBAChBkB,YAAW,WACTlB,EAAgB,QACf,aAITE,EAAc,SACdF,EAAgB,GAAD,OAAI/C,EAAJ,qCACfiE,YAAW,WACTlB,EAAgB,QACf,SAEA,CACL,IAAMqB,EAAa,CACjBjD,KAAMnB,EACNoB,OAAQjB,GAEVgD,EAAetB,OAAOuC,GAAYhB,MAAK,SAAAC,GACrCX,EAAW7B,EAAQwD,OAAOhB,EAASC,UAErCL,EAAc,WACdF,EAAgB,GAAD,OAAI/C,EAAJ,uBACfiE,YAAW,WACTlB,EAAgB,QACf,KAGLH,EAAW,IACXC,EAAa,KA+CT7C,QAASA,EACTC,WA7Ca,SAAAsD,GACjBX,EAAWW,EAAMe,OAAO/D,QA6CpBL,WArBa,WACjB,IAAIqE,EAAQ,IAAIC,OAAO,IAAMxE,EAAS,KAClCc,EAAkBD,EAAQ4D,QAAO,SAAAvD,GACnC,OAAOqD,EAAMG,KAAKxD,EAAOC,SAGJ,IAAnBnB,EAAQgB,OACV0B,EAAW7B,GAEX8B,EAAmB7B,IAajBX,UAAWA,EACXC,aA5Ce,SAAAmD,GACnBV,EAAaU,EAAMe,OAAO/D,UA6CxB,yCACA,oBAAID,GAAG,OAAP,SACE,cAAC,EAAD,CACEO,QAASA,EACTC,gBAAiBA,EACjBd,QAASA,EACTe,aAhDa,SAAAwC,GACnB,IAAIjD,EAAKiD,EAAMe,OAAOK,aAAa,eACtBZ,OAAOC,QAAQ,2BAE1Bb,EAAenB,cAAc1B,GAAI8C,MAAK,WACpCD,EAAezB,SAAS0B,MAAK,SAAAC,GAC3BX,EAAWW,EAASC,SAEtBL,EAAc,WACdF,EAAgB,yBAChBkB,YAAW,WACTlB,EAAgB,QACf,iBCjGX6B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U","file":"static/js/main.e4e4fdf6.chunk.js","sourcesContent":["import React from \"react\";\n\nexport function Form(props) {\n  const {\n    handleSubmit,\n    newName,\n    handleName,\n    filterName,\n    newNumber,\n    handleNumber\n  } = props;\n  return (\n    <form onSubmit={handleSubmit}>\n      {/* <h3>Add new contact</h3> */}\n      <div>\n        name:\n        <input\n          id=\"nameInput\"\n          value={newName}\n          onChange={handleName}\n          onKeyUp={filterName}\n        />\n      </div>\n      <div>\n        number:\n        <input\n          id=\"numberInput\"\n          type=\"tel\"\n          value={newNumber}\n          onChange={handleNumber}\n        />\n      </div>\n      <br></br>\n      <div>\n        <button className=\"btn btn-success\" type=\"submit\">\n          <b>Add contact</b>\n        </button>\n      </div>\n    </form>\n  );\n}\n","import React from \"react\";\n\nexport const Persons = props => {\n  const { persons, filteredPersons, newName, handleDelete } = props;\n  if (newName.length === 0) {\n    return persons.map(person => {\n      return (\n        <div key={person.name}>\n          <li>\n            {person.name} - - - {person.number}\n          </li>\n          <button\n            detector_id={person.id}\n            onClick={handleDelete}\n            className=\"btn btn-danger\"\n          >\n            Delete\n          </button>\n        </div>\n      );\n    });\n  } else {\n    return filteredPersons.map(filteredPerson => {\n      return (\n        <div key={filteredPerson.name}>\n          <li>\n            {filteredPerson.name} - - - {filteredPerson.number}\n            <button\n              detector_id={filteredPerson.id}\n              onClick={handleDelete}\n              className=\"btn btn-danger\"\n            >\n              Delete\n            </button>\n          </li>\n        </div>\n      );\n    });\n  }\n};\n","import axios from \"axios\";\nconst baseUrl = \"https://stormy-badlands-91104.herokuapp.com/api/persons\";\n\nconst getAll = () => {\n\treturn axios.get(baseUrl);\n};\n\nconst create = newObject => {\n\treturn axios.post(baseUrl, newObject);\n};\n\nconst deleteContact = id => {\n\treturn axios.delete(`${baseUrl}/${id}`);\n};\n\nconst update = (id, updatedNumber) => {\n\treturn axios.put(`${baseUrl}/${id}`, updatedNumber);\n};\n\nconst contacts = {\n\tgetAll,\n\tcreate,\n\tdeleteContact,\n\tupdate,\n};\n\nexport default contacts;\n","const Error = ({ message, style }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return (\n    <div id=\"messg\" className={style}>\n      {message}\n    </div>\n  );\n};\n\nexport default Error;\n","import React, { useState, useEffect } from \"react\";\nimport { Form } from \"./Form\";\nimport \"./index.css\";\nimport { Persons } from \"./Persons\";\nimport contactService from \"./services/contacts\";\nimport Error from \"./Error\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filteredPersons, setFilteredPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState([]);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [alertStyle, setAlertStyle] = useState(\"success\");\n\n  useEffect(() => {\n    contactService.getAll().then(response => {\n      setPersons(response.data);\n    });\n  }, []);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    let personsNames = persons.map(person => person.name);\n    let index = personsNames.indexOf(newName);\n    if (personsNames.includes(newName)) {\n      let currentPerson = persons[index];\n      if (currentPerson.number !== newNumber) {\n        let changedPerson = { ...currentPerson, number: newNumber };\n        let id = changedPerson.id;\n        let result = window.confirm(\n          `Would you like to replace number of ${newName}?`\n        );\n        if (result) {\n          contactService\n            .update(id, changedPerson)\n            .then(response => {\n              setPersons(\n                persons.map(person =>\n                  person.id !== id ? person : response.data\n                )\n              );\n              setAlertStyle(\"success\");\n              setErrorMessage(`Changed number of ${newName}`);\n              setTimeout(() => {\n                setErrorMessage(null);\n              }, 4000);\n            })\n            .catch(error => {\n              setAlertStyle(\"error\");\n              setErrorMessage(`Something went wrong`);\n              setTimeout(() => {\n                setErrorMessage(null);\n              }, 4000);\n            });\n        }\n      } else {\n        setAlertStyle(\"error\");\n        setErrorMessage(`${newName} with this number already exists`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 4000);\n      }\n    } else {\n      const newContact = {\n        name: newName,\n        number: newNumber\n      };\n      contactService.create(newContact).then(response => {\n        setPersons(persons.concat(response.data));\n      });\n      setAlertStyle(\"success\");\n      setErrorMessage(`${newName} added to contacts`);\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 4000);\n    }\n\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const handleName = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumber = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleDelete = event => {\n    let id = event.target.getAttribute(\"detector_id\");\n    let result = window.confirm(\"Do you want to delete?\");\n    if (result) {\n      contactService.deleteContact(id).then(() => {\n        contactService.getAll().then(response => {\n          setPersons(response.data);\n        });\n        setAlertStyle(\"success\");\n        setErrorMessage(`deleted from contacts`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 4000);\n      });\n    }\n  };\n\n  const filterName = () => {\n    let regex = new RegExp(\"^\" + newName, \"i\");\n    let filteredPersons = persons.filter(person => {\n      return regex.test(person.name);\n    });\n\n    if (newName.length === 0) {\n      setPersons(persons);\n    } else {\n      setFilteredPersons(filteredPersons);\n    }\n  };\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Error message={errorMessage} style={alertStyle} />\n      <Form\n        handleSubmit={handleSubmit}\n        newName={newName}\n        handleName={handleName}\n        filterName={filterName}\n        newNumber={newNumber}\n        handleNumber={handleNumber}\n      />\n      <h3>Numbers</h3>\n      <ul id=\"myUL\">\n        <Persons\n          persons={persons}\n          filteredPersons={filteredPersons}\n          newName={newName}\n          handleDelete={handleDelete}\n        />\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}